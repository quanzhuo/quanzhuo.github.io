---
layout: post
title: "Makefile 语法详解"
categories: Linux
tags: Makefile
---

* content
{:toc}

本文介绍 GNU make 的 Makefile 语法。




写 Makefile
====
Makefile 告诉 make 程序，如何编译，链接，以及处理程序。

Makefile 的组成
----
Makefile 中包含 5 类语句：显式规则，隐式规则，变量定义，指令和注释。下面主要从这五个
方面描述 Makefile 的语法。

Makefile 文件名
----
默认情况下，make 程序按照以下文件名查找顺序，查找 Makefile：
`GUNmakefile，makefile 和 Makefile`
你的 makefile 通常应该叫做 `makefile` 或者 `Makefile`。推荐叫做 `Makefile` 因为它出现
在文件夹列表的前面，并且靠近 README 文件。

如果指定的文件名不是以一个下线开始，并且文件没有在当前文件夹中找到，会搜索其他几个文件夹：
首先会搜索通过选线 -I 或者 --include-dir 选线包含的文件夹。然后搜索一下文件夹：
`/usr/local/include /usr/gnu/include /usr/local/include /usr/include` 当任然找不到时
make 会继续处理其他的内容，当所有的内容都读入之后，会尝试构建没有找到的 Makefile，如果无法
构建出该 makefile , make 出错。

包含其他 Makefile
----
可以使用 `-include` 来代替 `include` 忽略包含文件未找到的错误。`-` 意思是告诉 make，忽略
操作错误。make 继续执行。

    -include FILENAMES...
    
变量 MAKEFILES
----

Makefile 如何被重构
----

Make如何读取 Makefile
----

Makefile Rules
====

Rules 语法
----

在文件名中使用通配符
----

前提条件的搜索目录
----

Phony 目标
----

没有 Recipe 或 Prerequisites 的 Rule
----

使用空的 Target 文件记录事件
----

内建的特殊 Target 名
----

静态模式规则
----

双冒号规则
----

自动生成前提条件
----

写 Recipe
====

Recipe 语法
----

Recipe 回显
----

Recipe 执行
----

并行执行
----

错误
----

中断或者杀死 make
----

make 的递归使用
----

使用空的 Recipe
----

变量
====

基本变量引用
----

两种不同行为的变量
----

引用变量的高级特性
----

变量如何得到值
----

设置变量
----

往变量追加文本
----

override 指令
----

定义跨多行的多行变量
----

环境变量
----

Target 特定变量
----

Pattern 特定变量
----

其他特殊变量
----

Makefile 中的条件部分
====

使用函数处理文本
====

函数调用语法
----

使用函数处理字符串
----

文件名操作函数
----

条件操作函数
----

make 选项
====

使用参数执行 Makefile
----

使用参数指定 目标
----

不执行
----

使用 隐式规则
====

