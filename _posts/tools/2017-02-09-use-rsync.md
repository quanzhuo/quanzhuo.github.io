---
layout: post
title:  "使用 rsync 同步文件夹"
categories: tools
tags:
---

* content
{:toc}

不论处于什么样的目的，很多时候我们需要两个文件夹保持完全一致。比如说在 Android 平台开发
中，当上游厂商 release 出新的版本的代码的时候，我们就需要合并新的代码到我们的代码仓库中。
对于一两个文件的对比，当然没有任何问题，使用任何方法都可以。但是对于 Android 源码来说，
加上仓库一共有 50 ~ 60 GB 的代码，上百万的文件，此时就需要选取合适的工具。
BeyoundCompare 是一个程序员必备神器，可以用它来按成该工作。但是对比结果出来之后需要我们
手动 Merge，本文介绍怎么使用 rsync 命令来自动对比并 Merge 代码。



## rsync 简介

下面是 rsync 的 Manual Page 中的简介。

> rsync - a fast, versatile, remote (and local) file-copying tool

上面的一句话简单明了的概括了 rsync 的功能特性：快速，功能强大，远程复制，以及本地复制。
rsync 可以说是一个功能强大的复制工具。本文我们只会介绍一些使用 rsync 在本地 Merge 代码
时会用到的选项。

## 语法

rsync 在本地 Merge 两个文件夹的语法如下：

     rsync [OPTION...] SRC... DEST

## 选项

下面是一些合并代码会用到的选项

+ `-v, --verbose`：详尽的输出
+ `-i, --itemize-changes`: 输出文件变化的总结
+ `-C, --cvs-exclude`：按照版本控制系统的模式自动忽略文件
+ `-c, --checksum`：skip based on checksum, not mod-time & size
+ `-n, --dry-run`:
+ `--delete`：
+ `--exclude`：
+ `--no-times`：
+ `--no-perms`：

## 用法示例：

    rsync -av -C --exclude=.repo/ --exclude=.git/ -c -i --no-times --no-perms --delete src/ dest/

## 更多信息

上面只介绍了 rsync 全部功能的一小部分，更多的用法请查看 rsync 的官方手册。
